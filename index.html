<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DIAMOND OBFUSCATOR</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #0f172a;
    color: #cbd5e1;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  header {
    background: linear-gradient(90deg, #38bdf8, #0ea5e9);
    padding: 20px;
    font-size: 28px;
    font-weight: bold;
    color: #fff;
    text-shadow: 0 0 5px #38bdf8;
    width: 100%;
    text-align: center;
  }
  #subTitle {
    font-size: 16px;
    color: #94a3b8;
    margin-top: -10px;
    margin-bottom: 20px;
  }
  #dropZone {
    border: 2px dashed #38bdf8;
    border-radius: 12px;
    padding: 30px;
    width: 90%;
    max-width: 700px;
    margin: 10px auto;
    background: #1e293b;
    color: #94a3b8;
    transition: 0.3s;
    cursor: pointer;
  }
  #dropZone.dragover {
    background: #0f172a;
    color: #38bdf8;
    border-color: #0ea5e9;
  }
  input[type="file"] {
    margin-top: 10px;
    color: #cbd5e1;
  }
  textarea {
    width: 90%;
    max-width: 700px;
    height: 220px;
    margin: 15px auto;
    display: block;
    background: #1e293b;
    color: #38bdf8;
    border: 2px solid #0ea5e9;
    border-radius: 10px;
    padding: 10px;
    font-family: monospace;
    resize: vertical;
    box-shadow: 0 0 10px #38bdf855;
  }
  button {
    padding: 12px 25px;
    margin: 10px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    background: #38bdf8;
    color: #0f172a;
    box-shadow: 0 0 15px #38bdf855;
    transition: 0.2s;
  }
  button:hover {
    background: #0ea5e9;
    box-shadow: 0 0 20px #38bdf8aa;
  }
  footer {
    margin-top: 20px;
    padding: 10px;
    font-size: 14px;
    color: #94a3b8;
  }
</style>
</head>
<body>
  <header>💎 DIAMOND OBFUSCATOR</header>
  <div id="subTitle">Luau Code Obfuscator by KiRO</div>

  <div id="dropZone">
    <p>📂 Drag & Drop your Luau file here or</p>
    <input type="file" id="fileInput" accept=".lua,.luau,.txt">
  </div>

  <textarea id="inputCode" placeholder="Or paste your Luau code here..."></textarea>
  <button onclick="obfuscateCode()">Obfuscate</button>
  <button onclick="copyOutput()">Copy Output</button>
  <button onclick="downloadOutput()">Download Obfuscated</button>
  <textarea id="outputCode" placeholder="Obfuscated code will appear here..." readonly></textarea>

  <footer>Made by KiRO • Safe & fast obfuscation</footer>

  <script>
    // Random variable generator
    function randomVar() {
      let chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
      let name = "";
      for (let i = 0; i < 8; i++) name += chars.charAt(Math.floor(Math.random()*chars.length));
      return name;
    }

    // String encoder
    function encodeString(str) {
      let enc = "";
      for (let i = 0; i < str.length; i++) enc += "\\" + str.charCodeAt(i).toString(16);
      return '"' + enc + '"';
    }

    function obfuscateCode() {
      let input = document.getElementById("inputCode").value;
      if(!input.trim()){ alert("Paste some code!"); return; }

      // Replace variables
      let varMap = {};
      let obf = input.replace(/\b([a-zA-Z_][a-zA-Z0-9_]*)\b/g, (match)=>{
        if(["local","function","end","if","then","else","elseif","for","while","do","return","true","false","nil"].includes(match)) return match;
        if(!varMap[match]) varMap[match]=randomVar();
        return varMap[match];
      });

      // Encode strings
      obf = obf.replace(/"([^"]*)"/g, (_,str)=>encodeString(str));

      // Designed 5-line header
      const header = `--[[══════════════════════════════════
--[[      OBFUSCATED BY KIRO          
--[[      LUAU DIAMOND OBFUSCATOR      
--[[      PROTECTED & SECURED            
--[[══════════════════════════════════\n`;

      // Combine header + one-line obfuscation
      document.getElementById("outputCode").value = header + obf.replace(/\n/g,'');
    }

    function copyOutput() {
      let out = document.getElementById("outputCode");
      out.select();
      out.setSelectionRange(0,99999);
      document.execCommand("copy");
      alert("Copied!");
    }

    function downloadOutput() {
      const code = document.getElementById("outputCode").value;
      const blob = new Blob([code], {type: "text/plain"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "obfuscated.lua";
      a.click();
      URL.revokeObjectURL(url);
    }

    // File drag & drop
    const dropZone = document.getElementById("dropZone");
    dropZone.addEventListener("dragover", e => { e.preventDefault(); dropZone.classList.add("dragover"); });
    dropZone.addEventListener("dragleave", () => dropZone.classList.remove("dragover"));
    dropZone.addEventListener("drop", e => {
      e.preventDefault();
      dropZone.classList.remove("dragover");
      const file = e.dataTransfer.files[0];
      if(file){
        const reader = new FileReader();
        reader.onload = ev => document.getElementById("inputCode").value = ev.target.result;
        reader.readAsText(file);
      }
    });

    document.getElementById("fileInput").addEventListener("change", e => {
      const file = e.target.files[0];
      if(file){
        const reader = new FileReader();
        reader.onload = ev => document.getElementById("inputCode").value = ev.target.result;
        reader.readAsText(file);
      }
    });
  </script>
</body>
</html>
